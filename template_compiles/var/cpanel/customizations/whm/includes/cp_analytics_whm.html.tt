#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 3.100
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1728432000',
        'name' => '/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt',
    },
    BLOCK => sub {
    my $context = shift || die "template sub called without context\n";
    my $stash   = $context->stash;
    my $output  = '';
    my $_tt_error;

    eval { BLOCK: {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
# USE
$stash->set('Whostmgr',
            $context->plugin('Whostmgr'));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
# USE
$stash->set('NVData',
            $context->plugin('NVData'));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('is_sandbox', $stash->get(['Whostmgr', 0, 'is_sandbox', 0]));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('server_info', $stash->get(['Whostmgr', 0, 'get_server_info', 0]));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('main_server_ip', '');
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('server_info')) {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('main_server_ip', $stash->get(['server_info', 0, 'mainserverip', 0]));
}

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('is_root_user', $stash->get(['CPANEL', 0, 'authuser', 0]) eq 'root');
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('analytics_for_current_user', '');
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('personhood_for_current_user', '');
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('analytics_NVData', $stash->get(['NVData', 0, 'get', [ 'analytics', $stash->get('undef'), 0, 'whm' ]]));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('personhood_NVData', $stash->get(['NVData', 0, 'get', [ 'personhood', $stash->get('undef'), 0, 'whm' ]]));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('slideout_dismissed_nvdata_key', 'slideoutDismissed');
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('slideout_dismissed_NVData', $stash->get(['NVData', 0, 'get', [ $stash->get('slideout_dismissed_nvdata_key'), $stash->get('undef'), 0, 'whm' ]]));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('analytics_NVData')) {
$stash->set('analytics_for_current_user', $stash->get('analytics_NVData'));
}

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('personhood_NVData')) {
$stash->set('personhood_for_current_user', $stash->get('personhood_NVData'));
}

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('is_slideout_dismissed_for_current_user', 0);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('slideout_dismissed_NVData')) {
$stash->set('is_slideout_dismissed_for_current_user', $stash->get('slideout_dismissed_NVData'));
}

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('current_license_kind', 'TT_UNKNOWN', 1);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"

# TRY
$output .=  do {
    my $output = '';
    my ($_tt_error, $_tt_handler);
    eval {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
# USE
$stash->set('Verify',
            $context->plugin('Verify'));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('is_trial_license', $stash->get(['Verify', 0, 'is_trial', 0]));
    };
    if ($@) {
        $_tt_error = $context->catch($@, \$output);
        die $_tt_error if $_tt_error->type =~ /^(return|stop)$/;
        $stash->set('error', $_tt_error);
        $stash->set('e', $_tt_error);
        if (defined ($_tt_handler = $_tt_error->select_handler())) {
$_tt_error = 0;
        }
else {
    # DEFAULT
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('is_trial_license', $stash->get(['Whostmgr', 0, 'has_license_flag', [ 'trial' ]]));
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('current_license_kind', 'TT_VERIFY_PLUGIN_MISSING');
    $_tt_error = '';
}
    }
# FINAL
die $_tt_error if $_tt_error;
$output;
};

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('is_trial_license') && $stash->get('is_root_user')) {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('analytics_for_current_user') eq '') {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('analytics_for_current_user', 'on');
}

}

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('license_updated', 0, 1);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"

# TRY
$output .=  do {
    my $output = '';
    my ($_tt_error, $_tt_handler);
    eval {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('Verify') && $stash->get('is_root_user') && $stash->get('analytics_for_current_user') eq 'on') {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('current_license_kind', $stash->get(['Verify', 0, 'lookup_license_kind', [ $stash->get(['Verify', 0, 'current_license_status', 0]) ]]) || 'TT_VERIFY_PLUGIN_NO_RESULT');
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get(['Verify', 0, 'has_license_changed', 0])) {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('license_updated', 1);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['Verify', 0, 'clear_license_changed_event', 0]);
}

}

    };
    if ($@) {
        $_tt_error = $context->catch($@, \$output);
        die $_tt_error if $_tt_error->type =~ /^(return|stop)$/;
        $stash->set('error', $_tt_error);
        $stash->set('e', $_tt_error);
        if (defined ($_tt_handler = $_tt_error->select_handler())) {
$_tt_error = 0;
        }
else {
    # DEFAULT
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('current_license_kind', 'TT_VERIFY_PLUGIN_EXCEPTION');
    $_tt_error = '';
}
    }
# FINAL
die $_tt_error if $_tt_error;
$output;
};

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('sample_rate', 50, 1);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('ga_uid', 'UA-117050492-1', 1);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('is_sandbox')) {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('sample_rate', 100);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('ga_uid', 'UA-117050492-2');
}

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('is_trial_license')) {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('sample_rate', 100);
}

#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('base_path', '/var/cpanel/customizations/whm/includes');
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('license_expired_page', 0, 1);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('is_analytics_enabled_server_side', 0);
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get(['CPANEL', 0, 'analytics_ui_includes_are_enabled', 0]) && $stash->get(['CPANEL', 0, 'ENV', 0, 'DNT', 0, 'substr', [ 0, 1 ]]) ne '1') {
#line 2 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$stash->set('is_analytics_enabled_server_side', 1);
}


$output .=  '
<!-- Analytics consent gathering slideout stuff -->
';
#line 824 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('is_analytics_enabled_server_side') && $stash->get(['template_exists', [ ($stash->get('base_path') . '/slideout.js') ]]) && ! $stash->get('license_expired_page')) {
$output .=  '
<svg class="symbol" xmlns="http://www.w3.org/2000/svg">
    <symbol id="analytics-icon-arrow">
        <path d="M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"></path>
    </symbol>
</svg>
<!--
DEV NOTE: Do not change the id of the below container. It is accessed in the web component <cp-load-mixpanel-js /> web component
to check the existence of this popup.
-->
<div id="analyticsContainer">
<a id="analytics-tab" data-testid="analyticsTabButton-whm_consent_privacy_slideout" class="btn btn-link hide initial-state"
    aria-haspopup="true"
    aria-owns="analytics-slideout-container"
    aria-expanded="false"
    tabindex="0"
    href="javascript:void(0);">
    <div class="analytics-icon-container" aria-hidden="true">
        <div class="analytics-icon">
            <svg class="analytics-icon-arrow" viewBox="0 0 512 512">
                <use xlink:href="#analytics-icon-arrow" />
            </svg>
        </div>
    </div>
    <div class="analytics-tab-text">
        ';
#line 121 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'Analytics' ]]);
$output .=  '
    </div>
</a>

<div id="analytics-slideout-container" class="initial-state hide">
    <div id="analytics-content-container">
        <a id="analytics-close-button" data-testid="analyticsCloseButton-whm_consent_privacy_slideout" href="javascript:void(0);"
            title="';
#line 128 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'Close' ]]);
$output .=  '"
            aria-label="';
#line 129 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'close' ]]);
$output .=  '">
            <i class="fas fa-times fa-2x" aria-hidden="true"></i>
        </a>

        <div id="analytics-content">
            <div class="content-analytics-icon" aria-hidden="true">
                <svg class="analytics-icon-arrow" viewBox="0 0 512 512">
                    <use xlink:href="#analytics-icon-arrow" />
                </svg>
            </div>
            <div class="row">
                <div class="col-xs-12 cp-webmail-consent-privacy-modal__content-title">
                    <h1>';
#line 141 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'Consent and Privacy[comment,title]' ]]);
$output .=  '</h1>
                </div>
                <div class="co-xs-12 sub-text cp-consent-privacy__description">
                    <p>
                        ';
#line 145 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'WebPros International, LLC d.b.a cPanel is asking for your consent to participate in user activity tracking using third-party software for the purpose of understanding the performance of Webpros products. Information will be used pursuant to the [output,url,_1,cPanel & WHM Privacy Policy,title,cPanel & WHM Privacy Policy,data-test-id,_2,target,_3,class,_4,id,_5] and may be shared internally within the Webpros group. You can update your preferences at any time from the analytics slideout.', 'https://go.cpanel.net/privacy', 'docLink-whm_consent_cp-privacy-policy', 'privacy-policy', 'external-link', 'docLink-whm_consent_cp-privacy-policy' ]]);
$output .=  '
                    </p>
                </div>
                <div class="col-xs-12 cp-consent-privacy__input-container">
                    <label>
                        ';
#line 152 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'Select which account type best describes how you will use this product.' ]]);
$output .=  '
                    </label>
                    <select
                        name="personhood_setting"
                        id="personhood-setting"
                        data-testid="ddlPersonhoodSetting-whm_consent_privacy_slideout"
                        class="form-control form-input-select"
                    >
                        <option value="individual">
                            ';
#line 163 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'This account is for an individual.' ]]);
$output .=  '
                        </option>
                        <option value="business">';
#line 165 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'This account is for a business.' ]]);
$output .=  '</option>
                    </select>
                </div>
                <div class="col-xs-12 cp-consent-privacy__input-container">
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="checkbox">
                                <label>
                                    <input
                                        type="checkbox"
                                        name="consent_setting"
                                        id="consent-setting"
                                        data-testid="chkConsent-whm_consent_privacy_slideout"
                                        class="form-input-checkbox"
                                    ></input>
                                    ';
#line 180 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'By checking this box, you agree that we may collect your usage statistics. [output,url,_1, Learn more here.,title,cPanel Analytics Documentation,class,_2,target,_3,id,_4,data-test-id,_5]', 'https://go.cpanel.net/analytics', 'external-link', 'analytics', 'docLink-whm_consent_cp-analytics', 'docLink-whm_consent_cp-analytics' ]]);
$output .=  '
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12">
                    <button
                        id="btnSave"
                        data-testid="btnSave-whm_consent_privacy_slideout"
                        type="button"
                        class="btn btn-primary"
                        data-bs-toggle="button"
                    >
                        ';
#line 196 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['locale', 0, 'maketext', [ 'Save' ]]);
$output .=  '
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script>
';
#line 1 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $context->insert(($stash->get('base_path') . '/slideout.js'));
$output .=  "\n</script>\n\n<script>\n    (function() {\n        window.CPANEL = window.CPANEL || {};\n        window.CPANEL.analyticsSlideoutHiddenPaths = window.CPANEL.analyticsSlideoutHiddenPaths || [];\n        window.CPANEL.analyticsSlideoutHiddenPaths.push(\n            /\\/initial_setup_wizard1(\\/|\$)/,\n            /\\/wp-toolkit(\\/|\$)/\n        );\n\n        // Abort when viewing certain pages\n        if(shouldHideForPath(location.pathname)) {\n            return;\n        }\n\n        /**\n        * Determines whether the slideout/tab should be hidden for a given path.\n        * \@param {string} path   The path to check.\n        * \@returns {boolean}\n        */\n        function shouldHideForPath(path) {\n            return window.CPANEL.analyticsSlideoutHiddenPaths.some(function(regex) {\n                return regex.test(path);\n            });\n        }\n\n        /**\n        * Public methods from analyticsConsentData\n        * \@typedef {Object} analyticsConsentReturn\n        * \@property {function} updateView - update analytics consent view with value.\n        * \@property {function} approve - saves users approval for providing their data.\n        * \@property {function} deny - saves users denial for providing their data.\n        * \@property {function} saveConsent - API call to save users preference.\n        */\n\n        /**\n         * Code related to saving and displaying analytics consent\n         * \@return analyticsConsentReturn\n         */\n        var analyticsConsentData = (function() {\n            // cpanel security token\n            var cpsession = window.location.pathname.split(\"/\")[1];\n\n            // partial url to save nvdata for WHM\n            var whmAPICallPrefix = \"/json-api/nvset?api.version=1\";\n\n            var closeButton = document.getElementById(\"analytics-close-button\");\n            var slideoutDismissedNvDataKey = \"";
#line 254 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get('slideout_dismissed_nvdata_key');
$output .=  "\";\n\n            // analytics specific variable\n            var consentSetting = document.getElementById(\"consent-setting\");\n            var personhoodSetting = document.getElementById(\"personhood-setting\");\n            var currentConsentSetting = false; // Should only ever be true or false. Default to 'false';\n            var currentPersonhoodSetting = 'individual'; // Should only be \"individual\", or \"business\". Default to \"individual\".\n\n            /**\n             * Updates analytics consent view with data\n             * \@param settings {string} current analytics consent preference\n             */\n            function updateView(consentValue, personhoodValue) {\n                currentConsentSetting = consentValue || false;\n                currentPersonhoodSetting = personhoodValue || \"individual\";\n                personhoodSetting.value = currentPersonhoodSetting;\n                consentSetting.checked = currentConsentSetting;\n            }\n\n            /**\n             * Parse API response\n             * \@param result {Object} API result\n             */\n            function parseAPIStatus(result) {\n                return result && result.metadata.result == 1;\n            }\n\n            /**\n             * Saves users settings to nvdata\n             * \@param {bool} consent\n             * \@param {string} personhoodValue\n             */\n            function saveConsent (consent, personhoodValue) {\n                var request = new XMLHttpRequest();\n                var consentValue = consent ? \"on\" : \"off\";\n                request.open(\"GET\", \"/\" + cpsession + whmAPICallPrefix + \"&key=analytics&value=\" + consentValue + \"&key=personhood&value=\" + personhoodValue);\n                request.onload = function () {\n                    if (request.status >= 200 && request.status < 400) {\n                        var result;\n                        try {\n                            result = JSON.parse(request.responseText);\n                        } catch (e) {\n                        }\n\n                        var results = parseAPIStatus(result);\n                        if (results) {\n                            updateView(consent, personhoodValue);\n\n                            if(!consent){\n                                optOutOfAnalytics();\n                                return;\n                            }\n\n                            // Mixpanel init.\n                            var mixpanelConfig = \"\";\n                            ";
#line 311 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('analyticsConfig')) {
$output .=  '
                            mixpanelConfig = ';
#line 310 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['analyticsConfig', 0, 'json', 0]);
$output .=  ';
                            ';
}

$output .=  '
                            if(consent && mixpanelConfig){
                                // Enable analytics without having to reload the page.
                                enableAnalyticsForFirstTime(mixpanelConfig);
                            }
                        }
                    }
                };
                request.onloadend = function () {
                    slideout.closeSlideOut();
                };
                request.send();
            }

            function saveSlideoutDismiss() {
                var request = new XMLHttpRequest();
                request.open("GET", "/" + cpsession + whmAPICallPrefix + "&key=" + slideoutDismissedNvDataKey + "&value=1");
                request.send();
            }

            function resetSettings(){
                updateView(currentConsentSetting, currentPersonhoodSetting);
            }

            return {
                updateView: updateView,
                saveConsent: saveConsent,
                resetSettings: resetSettings,
                saveSlideoutDismiss: saveSlideoutDismiss,
            };
        })();

        var mainContainer = document.getElementById("analytics-slideout-container");
        var tab = document.getElementById("analytics-tab");
        var closeButton = document.getElementById("analytics-close-button");

        var consentSetting = document.getElementById("consent-setting");
        var personhoodSetting = document.getElementById("personhood-setting");
        var btnSaveEl = document.getElementById("btnSave");

        // Init current consent privacy settings to null. This helps to decide if we have to show slideout on page load
        // if these values aren\'t coming from nvdata.
        var currentConsentSetting = null;
        var currentPersonhoodSetting = null;
        var slideoutDismissed = false;

        // currentConsentSetting should be set only if analytics_for_current_user has some value.
        ';
#line 362 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('analytics_for_current_user') eq 'on') {
$output .=  '
            currentConsentSetting = true;
        ';
}
elsif ($stash->get('analytics_for_current_user') eq 'off') {
$output .=  '
            currentConsentSetting = false;
        ';
}

$output .=  '

        // currentPersonhoodSetting should be set only if personhood_for_current_user has some value.
        ';
#line 367 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('personhood_for_current_user') ne '') {
$output .=  '
            currentPersonhoodSetting = ';
#line 366 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['personhood_for_current_user', 0, 'json', 0]);
$output .=  ';
        ';
}

$output .=  '

        slideoutDismissed = ';
#line 369 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get('is_slideout_dismissed_for_current_user') ? 'true' : 'false';
$output .=  ";\n\n        analyticsConsentData.updateView(currentConsentSetting, currentPersonhoodSetting);\n\n        var slideout = slideoutFactory(\n            {\n                id: \"analytics\",\n                mainContainer: mainContainer,\n                tab: tab,\n                closeButton: closeButton,\n                sessionStorageKey : \"analyticsSessionId\",\n                onClose: onClose\n            }\n        );\n\n        btnSaveEl.addEventListener(\"click\", handleSaveConsentPrivacySettings);\n\n        /**\n         * Handles Save button click event.\n         */\n        function handleSaveConsentPrivacySettings() {\n            analyticsConsentData.saveConsent(consentSetting.checked, personhoodSetting.value);\n        }\n\n        /**\n        * Denies data consent when user closes analytics slide out\n        * without explicitly making a choice to allow or deny data collection\n        */\n        function onClose() {\n            analyticsConsentData.saveSlideoutDismiss();\n            analyticsConsentData.resetSettings();\n        }\n\n        setTimeout(function() {\n            // We should automatically open the slideout ONLY if settings don't exist and the slideout is NOT dismissed.\n            if((currentConsentSetting === null || currentPersonhoodSetting === null) && !slideoutDismissed){\n                slideout.openSlideOut();\n            }\n        }, 2000);\n\n    })();\n</script>\n\n<style>\n    #analytics-close-button .fa-times{\n        color: #ffffff;\n    }\n\n    #analytics-content p,\n    #analytics-content h1,\n    #analytics-content a,\n    #analytics-content label,\n    #analytics-tab {\n        font-family: \"Open Sans\",Arial,sans-serif;\n        color: #ffffff;\n        font-size: 14px;\n    }\n\n    svg.symbol{\n        display: none;\n    }\n\n    .analytics-icon {\n        height: 100%;\n        width: 100%;\n        position: relative;\n    }\n\n    .analytics-icon-arrow {\n        fill: white;\n    }\n\n    .content-analytics-icon{\n        position: relative;\n        width: 150px;\n        height: 150px;\n        margin: 0 auto;\n    }\n\n    #analytics-slideout-container {\n        position: fixed;\n\n        bottom: 0;\n        left: 0;\n        right: 0;\n        overflow: hidden;\n        background: rgba(43, 60, 72, 0);\n        transition: background 500ms, visibility 0s 500ms;\n        will-change: background;\n        visibility: hidden;\n        z-index: 2147483630; /* leaving it 8 less than max for future */\n\n        line-height: 20px;\n    }\n\n    #analytics-slideout-container.hide{\n        display: none;\n    }\n\n    #analytics-slideout-container.initial-state #analytics-content-container {\n        transition: transform 0s;\n    }\n\n    #analytics-slideout-container.active {\n        background: rgba(43, 60, 72, .5);\n        visibility: visible;\n        transition: background 1s 400ms, visibility 0s 0s;\n        overflow-y: auto;\n    }\n\n    #analytics-content-container {\n        min-height: 100%;\n        width: 100%;\n        max-width: 400px;\n        background: #2a3b49;\n        position: absolute;\n        transition: transform 350ms ease-in;\n        will-change: transform;\n    }\n\n    #analytics-content a {\n        color: white;\n        text-decoration: underline;\n    }\n\n     #analytics-content a:hover,\n     #analytics-content a:active,\n     #analytics-content a:focus {\n        color: white;\n        text-decoration: none;\n    }\n    #analytics-slideout-container.active #analytics-content-container {\n        transform: translateX(0);\n        transition: transform 650ms ease-in-out 400ms;\n    }\n\n    html[dir=\"ltr\"] #analytics-content-container {\n        right: 0;\n        transform: translateX(100%);\n    }\n\n    html[dir=\"rtl\"] #analytics-content-container {\n        left: 0;\n        transform: translateX(-100%);\n    }\n\n    #analytics-tab.hide{\n        display: none;\n    }\n\n    #analytics-tab {\n        box-sizing: border-box !important; /* Some older pages use content-box */\n        position: fixed;\n\n        width: 110px;\n        height: 30px;\n        background: #2a3b49;\n        padding: 0 4px; /* Container is 30x30. Icon is 22x22. 30px - 22px = 8px. 8px / 2 sides = 4px */\n        border: 0;\n\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n\n        cursor: pointer;\n        z-index: 999;\n\n        will-change: transform;\n        text-transform: none;\n    }\n\n    #analytics-tab.initial-state {\n        transition: transform 0s;\n    }\n\n    #analytics-tab.tab-hidden,\n    #analytics-tab.tab-hidden:hover,\n    #analytics-tab.tab-hidden:active,\n    #analytics-tab.tab-hidden:focus {\n        transition: transform 300ms cubic-bezier(0.6, -0.28, 0.74, 0.05);\n    }\n\n    html[dir=\"ltr\"] #analytics-tab {\n        transform: translateX(80px); /* 30px showing */\n        right: 0;\n        padding-right: 15px; /* Extra 10px of padding offscreen for the transition */\n        border-radius: 5px 0 0 5px;\n    }\n\n    html[dir=\"rtl\"] #analytics-tab {\n        transform: translateX(-80px); /* 30px showing */\n        left: 0;\n        padding-left: 15px; /* Extra 10px of padding offscreen for the transition */\n        border-radius: 0 5px 5px 0;\n    }\n\n    html[dir=\"ltr\"] #analytics-tab.initial-state {\n        transform: translateX(110px);\n    }\n\n    html[dir=\"rtl\"] #analytics-tab.initial-state {\n        transform: translateX(-110px);\n    }\n\n    html[dir=\"ltr\"] #analytics-tab.tab-hidden,\n    html[dir=\"ltr\"] #analytics-tab.tab-hidden:hover,\n    html[dir=\"ltr\"] #analytics-tab.tab-hidden:active,\n    html[dir=\"ltr\"] #analytics-tab.tab-hidden:focus {\n        transform: translateX(110px);\n    }\n\n    html[dir=\"rtl\"] #analytics-tab.tab-hidden,\n    html[dir=\"rtl\"] #analytics-tab.tab-hidden:hover,\n    html[dir=\"rtl\"] #analytics-tab.tab-hidden:active,\n    html[dir=\"rtl\"] #analytics-tab.tab-hidden:focus {\n        transform: translateX(-110px);\n    }\n\n    #analytics-tab.tab-collapsed {\n        transition: transform 800ms 300ms;\n    }\n\n    html[dir=\"ltr\"] #analytics-tab.tab-expanded {\n        animation:\n            tab-slide-in-ltr 2000ms cubic-bezier(1,-0.06,.9,0), /* slow in, fast out */\n            tab-bounce-ltr 600ms cubic-bezier(.22,.61,.36,1) 2000ms;\n    }\n\n    html[dir=\"rtl\"] #analytics-tab.tab-expanded {\n        animation:\n            tab-slide-in-rtl 2000ms cubic-bezier(1,-0.06,.9,0), /* slow in, fast out */\n            tab-bounce-rtl 600ms cubic-bezier(.22,.61,.36,1) 2000ms;\n    }\n\n    #analytics-tab:hover,\n    #analytics-tab:active,\n    #analytics-tab:focus {\n        text-decoration: none;\n        transition: transform 800ms cubic-bezier(.77,0,.18,1) /* cubic ff */\n    }\n\n    html[dir=\"ltr\"] #analytics-tab.tab-expanded,\n    html[dir=\"ltr\"] #analytics-tab:hover,\n    html[dir=\"ltr\"] #analytics-tab:active,\n    html[dir=\"ltr\"] #analytics-tab:focus {\n        transform: translateX(10px); /* 10px padding is offscreen for the transition */\n    }\n\n    html[dir=\"rtl\"] #analytics-tab.tab-expanded,\n    html[dir=\"rtl\"] #analytics-tab:hover,\n    html[dir=\"rtl\"] #analytics-tab:active,\n    html[dir=\"rtl\"] #analytics-tab:focus {\n        transform: translateX(-10px); /* 10px padding is offscreen for the transition */\n    }\n\n    #analytics-tab .analytics-icon-container {\n        height: 22px;\n        width: 22px;\n    }\n\n    #analytics-tab .analytics-tab-text {\n        color: #ffffff;\n    }\n\n    \@keyframes tab-slide-in-ltr {\n        0% { transform: translateX(110px); }\n        100% { transform: translateX(10px); }\n    }\n\n    \@keyframes tab-slide-in-rtl {\n        0% { transform: translateX(-110px); }\n        100% { transform: translateX(-10px); }\n    }\n\n    \@keyframes tab-bounce-ltr {\n        /*\n         * The fully expanded state leaves 10px hidden as a\n         * buffer for animation, so we oscillate around 10px.\n         */\n        0% { transform: translateX(10px); }\n        20% { transform: translateX(6px); }   /* 10 - 4 */\n        40% { transform: translateX(13px); }  /* 10 + 3 */\n        60% { transform: translateX(8px); }   /* 10 - 2 */\n        80% { transform: translateX(12px); }  /* 10 + 2 */\n        100% { transform: translateX(10px); }\n    }\n\n    \@keyframes tab-bounce-rtl {\n        /*\n         * The fully expanded state leaves 10px hidden as a\n         * buffer for animation, so we oscillate around 10px.\n         */\n        0% { transform: translateX(-10px); }\n        20% { transform: translateX(-6px); }   /* 10 - 4 */\n        40% { transform: translateX(-13px); }  /* 10 + 3 */\n        60% { transform: translateX(-8px); }   /* 10 - 2 */\n        80% { transform: translateX(-12px); }  /* 10 + 2 */\n        100% { transform: translateX(-10px); }\n    }\n\n    #analytics-close-button {\n        position: absolute;\n        top: 10px;\n        cursor: pointer;\n        color: #ffffff;\n        opacity: 0.7;\n    }\n\n    #analytics-close-button:focus,\n    #analytics-close-button:active,\n    #analytics-close-button:hover{\n        opacity: 1;\n    }\n\n    html[dir=\"ltr\"] #analytics-close-button {\n        right: 10px;\n    }\n\n    html[dir=\"rtl\"] #analytics-close-button {\n        left: 10px;\n    }\n\n    #analytics-content{\n        color: #ffffff;\n        margin: 80px 20px 20px 20px;\n        text-align: justify;\n    }\n\n    #analytics-content h1{\n        margin-top: 40px;\n        font-size: 20px;\n        font-weight: 600;\n        color: #ffffff;\n    }\n\n    #analytics-content .sub-text p {\n        margin-top: 20px !important;\n    }\n\n    #analytics-content .analytics-link {\n        background-color: #ffffff;\n        color: #293a4a;\n        margin: 20px 0 0 0;\n        padding: 10px;\n        border-radius: 2px;\n        opacity: 0.9\n    }\n\n    #analytics-content .analytics-link:hover,\n    #analytics-content .analytics-link:focus,\n    #analytics-content .analytics-link:active{\n        background-color: #ffffff;\n        opacity: 1;\n        text-decoration: none;\n        color: #293a4a; /* Added to reduce chances of cpanel styles overriding the color */\n    }\n\n    /**\n     * Beautiful WHM overrides to mimic relevant boostrap styles\n     */\n    #analytics-content .btn {\n        border: 1px solid transparent;\n    }\n\n    #analytics-content .sub-text p {\n        margin-bottom: 10px;\n    }\n\n    #analytics-content label {\n        font-weight: 600;\n        margin-bottom: 5px;\n        display: inline-block;\n    }\n\n    #analytics-content input[type=radio] {\n        margin: 4px 0 0;\n    }\n\n    /**\n     * At low heights, we'll hide the icon, increase max-width a little,\n     * squeeze out some of the vertical margins, and vertically align center.\n     */\n    \@media (max-height: 600px) {\n        .content-analytics-icon {\n            display: none;\n        }\n\n        #analytics-content-container {\n            max-width: 450px;\n            display: flex;\n            align-items: center;\n        }\n\n        #analytics-content {\n            margin-top: 20px;\n        }\n\n        #analytics-content h1 {\n            margin-top: 0;\n        }\n    }\n\n    /**\n     * At low heights, we'll go full width while still contsraining the\n     * text block's width.\n     */\n    \@media (max-width: 500px) {\n        #analytics-content-container {\n            max-width: 100%;\n            display: flex;\n            justify-content: center;\n        }\n    }\n\n    /**\n     * For extremely narrow landscape devices, margins are tightened up\n     * even more.\n     */\n    \@media (min-width: 768px) and (max-height: 359px) {\n        #analytics-content {\n            margin-top: 15px;\n        }\n\n        #analytics-content .sub-text p {\n            margin-top: 10px;\n            margin-bottom: 0;\n        }\n    }\n\n    .cp-webmail-consent-privacy-modal__content-title h1{\n        line-height:1.2;\n        text-align:center;\n        margin-bottom:var(--cp-spacer-3);\n    }\n\n    .cp-consent-privacy__input-container {\n        margin-bottom:var(--cp-spacer-2);\n    }\n\n    .cp-consent-privacy__description {\n        margin-bottom:var(--cp-spacer-5);\n        padding:0 var(--cp-spacer-3);\n    }\n\n    .external-link::after {\n        // stylelint-disable-next-line font-family-no-missing-generic-family-keyword\n        font-family: remixicon;\n\n        // NOTE: Renders a space followed by the external-link icon. A space character\n        // is used rather than margin or padding so that the space will scale properly\n        // across font sizes and link underlines will have no gaps.\n        content: \" \\ecaf\";\n    }\n\n</style>\n";
}

$output .=  '<!-- END: Analytics consent gathering slideout stuff -->

<script type="text/javascript" src="';
#line 827 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['MagicRevision', [ '/libraries/ui-analytics/mixpanelSetup.js' ]]);
$output .=  '"></script>

';
#line 884 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('analytics_for_current_user') eq 'on') {
$output .=  '
<script async src="https://www.googletagmanager.com/gtag/js?id=';
#line 830 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get('ga_uid');
$output .=  '"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag(\'js\', new Date());

    (function(){
        var path = window.location.pathname;
        if (path) {
            var wholepath = path.split(\'/\');
            var custompath = wholepath.slice(2);
            path = \'/\' + custompath.join(\'/\');
        }
        var thelocation = window.location.protocol + "//" + window.location.host + path;
        var masterContainer = document.getElementById("masterContainer");
        var app_key = "";
        if(masterContainer != null) {
           app_key = masterContainer.getAttribute("data-app-key") || \'\';
        }
        gtag(\'config\', \'';
#line 849 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get('ga_uid');
$output .=  '\', {
            \'page_path\': path,
            \'page_title\': \'WHM-\' + (app_key || path),
            \'page_location\': thelocation,
            \'anonymize_ip\': true,
            \'sample_rate\': ';
#line 854 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get('sample_rate');
$output .=  ',
            \'custom_map\': {
                // for the cp_analytics event
                \'dimension1\': \'cp-company-id\',
                \'dimension2\': \'cp-product-version\',
                \'dimension3\': \'cp-product-interface\',
                \'dimension4\': \'cp-product-theme-style\',
                \'dimension5\': \'cp-os\',

                // for the cp_analytics and cp_license_change events
                \'dimension10\': \'cp-current-license-kind\',
            }
        });

        ';
#line 872 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
if ($stash->get('license_updated')) {
$output .=  '
        gtag(\'event\', \'cp_license_change\', {
            \'cp-current-license-kind\': ';
#line 870 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['current_license_kind', 0, 'json', 0]);
$output .=  '
        });
        ';
}

$output .=  '

        gtag(\'event\', \'cp_analytics\', {
            \'cp-company-id\': \'';
#line 875 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get('get_company_id');
$output .=  '\',
            \'cp-product-version\': \'';
#line 876 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['Whostmgr', 0, 'WHM_VERSION', 0]);
$output .=  '\',
            \'cp-product-interface\': \'WHM\',
            \'cp-product-theme-style\': \'N/A\', // WHM doesn\'t have a theme or style
            \'cp-os\': \'';
#line 879 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['Whostmgr', 0, 'template_vars', 0, 'BASEOS', 0]);
$output .=  '\',
            \'cp-current-license-kind\': ';
#line 880 "/var/cpanel/customizations/whm/includes/cp_analytics_whm.html.tt"
$output .=  $stash->get(['current_license_kind', 0, 'json', 0]);
$output .=  '
        });
    })();
</script>
';
}

$output .=  '
';
    } };
    if ($@) {
        $_tt_error = $context->catch($@, \$output);
        die $_tt_error unless $_tt_error->type eq 'return';
    }

    return $output;
},
    DEFBLOCKS => {

    },
});
